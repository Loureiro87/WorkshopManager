@model IEnumerable<WorkshopManager.Domain.Entities.Cita>

@{
    ViewData["Title"] = "Citas";
}
@functions {
    string EstadoCss(WorkshopManager.Domain.Enums.CitaEstado estado)
    {
        return estado switch
        {
            WorkshopManager.Domain.Enums.CitaEstado.PendienteEntrega => "secondary",
            WorkshopManager.Domain.Enums.CitaEstado.EnProceso => "warning",
            WorkshopManager.Domain.Enums.CitaEstado.EnEsperaRecogida => "info",
            WorkshopManager.Domain.Enums.CitaEstado.Finalizada => "success",
            WorkshopManager.Domain.Enums.CitaEstado.Cancelada => "danger",
            _ => "secondary"
        };
    }
}
<h1>Listado de Citas</h1>

<hr />


<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>📋 Citas</h2>

    <a asp-action="Create" class="btn btn-primary">
        Nueva cita
    </a>
</div>

<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Cliente</th>
            <th>Vehículo</th>
            <th>Entrega</th>
            <th>Estado</th>
            <th class="text-end">Acciones</th>
        </tr>
    </thead>
    <tbody>

        @foreach (var cita in Model)
        {
            <tr>
                <td>@cita.Cliente.Nombre</td>

                <td>
                    @cita.Vehiculo.Marca @cita.Vehiculo.Modelo
                    <br />
                    <small class="text-muted">@cita.Vehiculo.Matricula</small>
                </td>

                <td>@cita.FechaEntrega.ToString("dd/MM/yyyy")</td>

                <td>
                    <span class="badge bg-@EstadoCss(cita.Estado)">
                        @cita.Estado
                    </span>
                </td>

                <td class="text-end">
                    <a asp-action="Edit"
                       asp-route-id="@cita.Id"
                       class="btn btn-sm btn-outline-secondary me-1">
                        Editar
                    </a>

                    <a asp-action="Delete"
                       asp-route-id="@cita.Id"
                       class="btn btn-sm btn-outline-danger">
                        Eliminar
                    </a>
                </td>
                
            </tr>
        }

    </tbody>
</table>